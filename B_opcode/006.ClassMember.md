# Class Member

<!-- TOC -->

- [1. 特殊方法：构造函数](#1-%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0)
- [2. 特殊方法：类初始化函数](#2-%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96%E5%87%BD%E6%95%B0)
  - [2.1. 不加final](#21-%E4%B8%8D%E5%8A%A0final)
  - [2.2. 加final](#22-%E5%8A%A0final)
  - [2.3. static Integer](#23-static-integer)
  - [2.4. 静态对象字段](#24-%E9%9D%99%E6%80%81%E5%AF%B9%E8%B1%A1%E5%AD%97%E6%AE%B5)
  - [2.5. static Object instance](#25-static-object-instance)
- [3. 静态字段](#3-%E9%9D%99%E6%80%81%E5%AD%97%E6%AE%B5)

<!-- /TOC -->

## 1. 特殊方法：构造函数

final int intValue

```java
public class HelloWorld {

}
```

```txt
ConstantPool {
    |001| CONSTANT_Methodref {Value='java/lang/Object.<init>:()V', HexCode='0A0003000D'}
    ......

code='2AB70001B1'
    0: aload_0         // 2A
    1: invokespecial 1 // B70001
    4: return          // B1


LocalVariableTable:
index  start_pc  length  name_and_type
    0         0       5  this:Llsieun/sample/HelloWorld;
```

```java
public class HelloWorld {
    public HelloWorld() {
        super();
    }
}
```

## 2. 特殊方法：类初始化函数

目标方法：`<clinit>:()V`

### 2.1. 不加final

```java
public class HelloWorld {
    public static int intValue = 1;
}
```


```txt
ConstantPool {
    |002| CONSTANT_Fieldref {Value='lsieun/sample/HelloWorld.intValue:I', HexCode='0900030012'}

code='04B30002B1'
    0: iconst_1        // 04
    1: putstatic 2     // B30002
    4: return          // B1
```

### 2.2. 加final

```java
public class HelloWorld {
    public static final int intValue = 1;
}
```

注意：此时并不存在`<clinit>:()V`方法。

```txt
FieldInfo {Value='intValue:I', AccessFlags='[ACC_PUBLIC,ACC_STATIC,ACC_FINAL]', Attrs='[ConstantValue]', HexCode='00190004000500010006000000020007'}

=================================================

ConstantValue {Value='1', HexCode='0006000000020007'}
```

### 2.3. static Integer

```java
public class HelloWorld {
    // 关注点： 这里没有使用final关键字
    public static Integer intValue = 1;
}
```

和

```java
public class HelloWorld {
    // 关注点： 这里使用了final关键字
    public static final Integer intValue = 1;
}
```

两段代码具有相同的输出结果：

```txt
ConstantPool {
    |002| CONSTANT_Methodref {Value='java/lang/Integer.valueOf:(I)Ljava/lang/Integer;', HexCode='0A00130014'}
    |003| CONSTANT_Fieldref {Value='lsieun/sample/HelloWorld.intValue:Ljava/lang/Integer;', HexCode='0900040015'}
    ......

code='04B80002B30003B1'
    0: iconst_1        // 04
    1: invokestatic 2  // B80002
    4: putstatic 3     // B30003
    7: return          // B1
```

### 2.4. 静态对象字段

加不加final对于ReferenceType没有影响。

```java
public class HelloWorld {
    public static HelloWorld instance = new HelloWorld();
}
```

```txt
ConstantPool {
    |002| CONSTANT_Class {Value='lsieun/sample/HelloWorld', HexCode='070012'}
    |003| CONSTANT_Methodref {Value='lsieun/sample/HelloWorld.<init>:()V', HexCode='0A00020011'}
    |004| CONSTANT_Fieldref {Value='lsieun/sample/HelloWorld.instance:Llsieun/sample/HelloWorld;', HexCode='0900020013'}
    ......

code='BB000259B70003B30004B1'
    0: new 2           // BB0002
    3: dup             // 59
    4: invokespecial 3 // B70003
    7: putstatic 4     // B30004
   10: return          // B1
```

### 2.5. static Object instance

```java
public class HelloWorld {
    public static Object instance = new Object();
}
```

```txt
ConstantPool {
    |001| CONSTANT_Methodref {Value='java/lang/Object.<init>:()V', HexCode='0A00020011'}
    |002| CONSTANT_Class {Value='java/lang/Object', HexCode='070012'}
    |003| CONSTANT_Fieldref {Value='lsieun/sample/HelloWorld.instance:Ljava/lang/Object;', HexCode='0900040013'}
    ......

code='BB000259B70001B30003B1'
    0: new 2           // BB0002
    3: dup             // 59
    4: invokespecial 1 // B70001
    7: putstatic 3     // B30003
   10: return          // B1
```

## 3. 静态字段

```java
public class HelloWorld {
    public static Object instance = new Object();

    public void testSimple() {
        Object obj = HelloWorld.instance;
    }
}
```

```txt
ConstantPool {
    |002| CONSTANT_Fieldref {Value='lsieun/sample/HelloWorld.instance:Ljava/lang/Object;', HexCode='0900040014'}
    ......

code='B200024CB1'
    0: getstatic 2     // B20002
    3: astore_1        // 4C
    4: return          // B1


LocalVariableTable:
index  start_pc  length  name_and_type
    0         0       5  this:Llsieun/sample/HelloWorld;
    1         4       1  obj:Ljava/lang/Object;
```



