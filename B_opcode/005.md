# 创建对象

<!-- TOC -->

- [1. String](#1-string)
- [2. Object](#2-object)
  - [2.1. new Object](#21-new-object)
- [3. array](#3-array)
  - [3.1. byte array](#31-byte-array)
  - [3.2. int array](#32-int-array)
  - [3.3. String array](#33-string-array)
  - [3.4. Object Array](#34-object-array)

<!-- /TOC -->

## 1. String

```java
public class HelloWorld {
    public void testSimple() {
        String strA = "Atmosphere";
        String strB = "Blue";
        String strC = "Courageous";
        String strD = "Duck";
        String strE = "Express";
        String strF = "Fruit";
    }
}
```

```txt
ConstantPool {
    |002| CONSTANT_String {Value='Atmosphere', HexCode='08001C'}
    |003| CONSTANT_String {Value='Blue', HexCode='08001D'}
    |004| CONSTANT_String {Value='Courageous', HexCode='08001E'}
    |005| CONSTANT_String {Value='Duck', HexCode='08001F'}
    |006| CONSTANT_String {Value='Express', HexCode='080020'}
    |007| CONSTANT_String {Value='Fruit', HexCode='080021'}
    ......

code='12024C12034D12044E12053A0412063A0512073A06B1'
    0: ldc 2
    2: astore_1
    3: ldc 3
    5: astore_2
    6: ldc 4
    8: astore_3
    9: ldc 5
    11: astore 4
    13: ldc 6
    15: astore 5
    17: ldc 7
    19: astore 6
    21: return

LocalVariableTable:
index  start_pc  length  name_and_type
    0         0      22  this:Llsieun/sample/HelloWorld;
    1         3      19  strA:Ljava/lang/String;
    2         6      16  strB:Ljava/lang/String;
    3         9      13  strC:Ljava/lang/String;
    4        13       9  strD:Ljava/lang/String;
    5        17       5  strE:Ljava/lang/String;
    6        21       1  strF:Ljava/lang/String;
```

ldc
astore_1

| Format     | Decimal(十进制) | Hex(十六进制) | Operation                             |
| ---------- | --------------- | ------------- | ------------------------------------- |
| `ldc`      | `18`            | `0x12`        | Push item from run-time constant pool |
| `astore_0` | `75`            | `0x4b`        | Store `reference` into local variable |
| `astore_1` | `76`            | `0x4c`        |                                       |
| `astore_2` | `77`            | `0x4d`        |                                       |
| `astore_3` | `78`            | `0x4e`        |                                       |
| `astore`   | `58`            | `0x3a`        | Store `reference` into local variable |

## 2. Object

```java
public class HelloWorld {
    public void testSimple() {
        Object obj = null;
    }
}
```

```txt
code='014CB1'
    0: aconst_null     // 01
    1: astore_1        // 4C
    2: return          // B1

LocalVariableTable:
index  start_pc  length  name_and_type
    0         0       3  this:Llsieun/sample/HelloWorld;
    1         2       1  obj:Ljava/lang/Object;
```

### 2.1. new Object

```java
public class HelloWorld {
    public void testSimple() {
        Object obj = new Object();
    }
}
```

```txt
ConstantPool {
    |001| CONSTANT_Methodref {Value='java/lang/Object.<init>:()V', HexCode='0A00020010'}
    |002| CONSTANT_Class {Value='java/lang/Object', HexCode='070011'}
    ......

code='BB000259B700014CB1'
    0: new 2           // BB0002
    3: dup             // 59
    4: invokespecial 1 // B70001
    7: astore_1        // 4C
    8: return          // B1


LocalVariableTable:
index  start_pc  length  name_and_type
    0         0       9  this:Llsieun/sample/HelloWorld;
    1         8       1  obj:Ljava/lang/Object;
```

## 3. array

### 3.1. byte array

```java
public class HelloWorld {
    public void testSimple() {
        byte[] byte_array = new byte[0];
    }
}
```

```txt
code='03BC084CB1'
    0: iconst_0        // 03
    1: newarray 8      // BC08
    3: astore_1        // 4C
    4: return          // B1


LocalVariableTable:
index  start_pc  length  name_and_type
    0         0       5  this:Llsieun/sample/HelloWorld;
    1         4       1  byte_array:[B
```

### 3.2. int array

```java
public class HelloWorld {
    public void testSimple() {
        int[] int_array = new int[0];
    }
}
```

```txt
code='03BC0A4CB1'
    0: iconst_0        // 03
    1: newarray 10     // BC0A
    3: astore_1        // 4C
    4: return          // B1

LocalVariableTable:
index  start_pc  length  name_and_type
    0         0       5  this:Llsieun/sample/HelloWorld;
    1         4       1  int_array:[I
```

### 3.3. String array

```java
public class HelloWorld {
    public void testSimple() {
        String[] str_array = new String[5];
    }
}
```

```txt
ConstantPool {
    |002| CONSTANT_Class {Value='java/lang/String', HexCode='070012'}
    ......

code='08BD00024CB1'
    0: iconst_5        // 08
    1: anewarray 2     // BD0002
    4: astore_1        // 4C
    5: return          // B1


LocalVariableTable:
index  start_pc  length  name_and_type
    0         0       6  this:Llsieun/sample/HelloWorld;
    1         5       1  str_array:[Ljava/lang/String;
```

### 3.4. Object Array

```java
public class HelloWorld {
    public void testSimple() {
        Object[] obj_array = new Object[10];
    }
}
```

```txt
ConstantPool {
    |002| CONSTANT_Class {Value='java/lang/Object', HexCode='070011'}
    ......

code='100ABD00024CB1'
    0: bipush 10       // 100A
    2: anewarray 2     // BD0002
    5: astore_1        // 4C
    6: return          // B1


LocalVariableTable:
index  start_pc  length  name_and_type
    0         0       7  this:Llsieun/sample/HelloWorld;
    1         6       1  obj_array:[Ljava/lang/Object;
```